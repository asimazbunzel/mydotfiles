#/bin/sh

# search for active mic source
active_source=$(pacmd list-sources | awk '/* index:/{print $3}')

# find status (muted/unmuted)
status=$(pacmd list-sources | grep -A 15 'index: '${active_source}'' | awk '/muted/{print $2}')

# toggle depending on status
if [[ $status == 'no' ]]; then
   pactl set-source-mute ${active_source} 1
   notify-send -t 500 "Microphone Manager" "Status: ðŸš« muted"
else
   pactl set-source-mute ${active_source} 0
   notify-send -t 500 "Microphone Manager" "Status: ðŸŽ¤ unmuted"
fi
